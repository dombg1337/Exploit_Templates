import requests
import sys

# Login Function
def login(loginURL, username, password):
    session = requests.Session()
    proxies = { 'http':'http://127.0.0.1:8080' }
    session.proxies.update(proxies) # adds proxy for all future session interactions
    
    data = {
        "form_password_hidden":password,
        "form_login":username
    }
    r = session.post(loginURL, data=data)

    if "Invalid login" in r.text:
        print("[ERROR] Login Failed!")
        sys.exit(1)
    else:
        print("[INFO] Login Successful!")
        print(session.cookies)
        return session

username = "user"
password = "pass"

session = login("http://foo.bar/login", username, password)
